<p lang="ru-RU" align="center"><span style="color: #303030;"><span
        style="font-family: 'Roboto Slab', 'Times New Roman';"><span
        style="font-size: large;"><strong>Ответы на вопросы на собеседование JDBC. </strong></span></span></span>
</p>
<p lang="en-US" align="center">&nbsp;</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="color: #434343;"><span
                style="font-size: medium;"><span
                lang="ru-RU"><strong>Что такое JDBC?</strong></span></span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">API JDBC (Java DataBase Connectivity) - стандартный прикладной интерфейс языка Java для организации взаимодействия между приложением и СУБД. Взаимодействие осуществляется с помощью драйверов JDBC, обеспечиваю щих реализацию общих интерфейсов для конкретных СУБД и конкретних протоколов. В JDBC определяются четыре типа драйверов.</span></span></span></span></span></span></span>
</p>
<p align="justify">&nbsp;</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="color: #434343;"><span
                style="font-size: medium;"><span lang="ru-RU"><strong>Этапы работы с базой данных с использованием JDBC?</strong></span></span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Этапы работы с базой данных с использованием JDBC:</span></span></span></span> </span></span></span>
</p>
<ol>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">Подключение библиотеки с классом-драйвером базы данных.</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><a name="more"></a> <span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">Установка соединения с БД.</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">Создание объекта для передачи запросов.</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">Выполнение запроса.</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">Обработка результатов выполнения запроса.</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">Закрытие соединения, statement</span></span></span></span></span></span></span>
        </p>
    </li>
</ol>
<p class="western" lang="ru-RU" align="justify">&nbsp;</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="color: #434343;"><span
                style="font-size: medium;"><span
                lang="ru-RU"><strong>Как создать Connection?</strong></span></span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Для установки соединения с БД вызывается статический метод getConnection() класса java.sql.DriverManager. В качестве параметров методу передаються URL базы данных, логин пользователя БД и пароль доступа. Загрузка класса драйвера базы данных при отсутствии ссылки на экземпляр этого класса в JDBC 4.1 происходит автоматически при установке соединения екземпляром DriverManager. Метод возвращает объект Connection. URL базы данных, состоящий из типа и адреса физического расположения БД, может создаваться в виде отдельной строки или извлекаться из файла ресурсов. Соответственно:</span></span></span></span> </span></span></span>
</p>
<p lang="ru-RU" align="center"><span style="color: #6a6359;"><img
        src="file:///android_asset/jdbc/jdbc1.jpg" width="640"
        height="65" name="Picture 1" align="bottom" border="0"/> </a> </span></p>
<p class="western" align="justify"><span style="font-family: Halant, 'Times New Roman';"><span
        style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">В результате будет возвращен объект Connection и будет одно установленное соединение с БД с именем testphones. Класс DriverManager предоставляет средства для управления набором драйверов баз данных.</span></span></span></span>
</p>
<p align="justify">&nbsp;</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="color: #434343;"><span
                style="font-size: medium;"><span lang="ru-RU"><strong>Чем отличается Statement от PreparedStatement?</strong></span></span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Объект Statement используется для выполнения SQL-запросов к БД. Существует три типа объектов Statement. Все три служат как бы конейнерами для выполнения SQL-выражений через данное соединение: Statement, PreparedStatement, наследующий от Statement, и CallableStatement, наследующий от PreparedStatement. Они специализируются на различных типах запросов: Statement используется для выполнения простых SQL-запросов без параметров; PreparedStatement используется для выполнения прекомпилированных SQL-запросов с или без входных (IN) параметров; CallableStatement используется для вызовов хранимых процедур.</span></span></span></span></span></span></span>
</p>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Интерфейс Statement предоставляет базовые методы для выполнения запросов и извлечения результатов. Интерфейс PreparedStatement добавляет методы управления входными (IN) параметрами; CallableStatement добавляет методы для манипуляции выходними (OUT) параметрами.</span></span></span></span></span></span></span>
</p>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Интерфейс PreparedStatement наследует от Statement и отличается от последнего следующим:</span></span></span></span></span></span></span>
</p>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Экземпляры PreparedStatement "помнят" скомпилированные SQL-выражения. Именно поэтому они называются "prepared" ("подготовленные").</span></span></span></span></span></span></span>
</p>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">SQL-выражения в PreparedStatement могут иметь один или более входной (IN) параметр. Входной параметр - это параметр, чье значение не указывается при создании SQL-выражения. Вместо него в выражении на месте каждого входного параметра ставится знак ("?"). Значение каждого вопросительного знака устанавливается методами setXXX перед выполнением запроса.</span></span></span></span></span></span></span>
</p>
<p lang="ru-RU" align="justify">&nbsp;</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="color: #434343;"><span
                style="font-size: medium;"><span lang="ru-RU"><strong>Как вызвать хранимую процедуру?</strong></span></span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Хранимые процедуры &ndash; это именованный набор операторов Transact-SQL хранящийся на сервере. Такую процедуру можно легко вызвать из Java-класса с помощью специального синтаксиса. При вызове такой процедуры необходимо указать ее имя и определить список параметров. Имя и список параметров посылаются по JDBC-соединению в СУБД, которая выполняет вызываемую процедуру и возвращает результат (если таковой имеется) обратно, используя это же соединение. </span></span></span></span></span></span></span>
</p>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">JDBC Java-код для выполнения хранимой процедуры, использующий объект Statement без параметров.</span></span></span></span> </span></span></span>
</p>
<p lang="ru-RU" align="center"><span style="color: #6a6359;"><img
        src="file:///android_asset/jdbc/jdbc2.jpg" width="640"
        height="241" name="Picture 2" align="bottom" border="0"/> </a> </span></p>
<p lang="ru-RU" align="justify">&nbsp;</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="color: #434343;"><span
                style="font-size: medium;"><span lang="ru-RU"><strong>Как правильно закрыть Connection?</strong></span></span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p lang="ru-RU" align="center"><span style="color: #6a6359;"><img
        src="file:///android_asset/jdbc/jdbc3.jpg" width="587"
        height="42" name="Picture 3" align="bottom" border="0"/> </a> </span></p>
<p class="western" lang="ru-RU" align="justify">&nbsp;</p>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">После того, как база больше не нужна, соединение закрывается. Для того, чтобы правильно пользоваться приведенными методами, программисту требуется знать типы полей БД. В распределенных системах это знание предполагается изначально. В Java 7 для объектов-ресурсов, требующих закрытия, реализована технология try with resources.</span></span></span></span></span></span></span>
</p>
<p lang="ru-RU" align="justify">&nbsp;</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="color: #434343;"><span
                style="font-size: medium;"><span lang="ru-RU"><strong>Какие есть уровни изоляции транзакций?</strong></span></span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Уровни изоляции транзакций определены в виде констант интерфейса</span></span></span></span></span></span></span>
</p>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Connection (по возрастанию уровня ограничения):</span></span></span></span></span></span></span>
</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">TRANSACTION_NONE - информирует о том, что драйвер не поддерживает транзакции;</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">TRANSACTION_READ_UNCOMMITTED - позволяет транзакциям видеть несохраненные изменения данных, что разрешает грязное, неповторяющееся и фантомное чтения;</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">TRANSACTION_READ_COMMITTED - означает, что любое изменение, сделанное в транзакции, не видно вне ее, пока она не сохранена. Это предотвращает грязное чтение, но разрешает неповторяющееся и фантомное;</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">TRANSACTION_REPEATABLE_READ - запрещает грязное и неповторяющееся чтение, но фантомное разрешено;</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">TRANSACTION_SERIALIZABLE - определяет, что грязное, неповторяющееся и фантомное чтения запрещены.</span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p lang="ru-RU" align="justify">&nbsp;</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="color: #434343;"><span
                style="font-size: medium;"><span lang="ru-RU"><strong>Какие есть типов чтения транзакций?</strong></span></span></span></span></span></span></span></span>
        </p>
    </li>
</ul>
<p align="justify"><span style="color: #333333;"><span
        style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
        style="font-family: Halant, 'Times New Roman';"><span style="font-size: large;"><span
        style="font-size: medium;"><span lang="ru-RU">Для транзакций существует несколько типов чтения:</span></span></span></span> </span></span></span>
</p>
<ul>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">грязное чтение (dirty reads) происходит, когда транзакциям разрешено видеть несохраненные изменения данных. Иными словами, изменения, сделанные в одной транзакции, видны вне ее до того, как она была сохранена. Если изменения не будут сохранены, то, вероятно, другие транзакции выполняли работу на основе некорректных данных;</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">неповторяющееся чтение (nonrepeatable reads) происходит, когда транзакция А читает строку, транзакция Б изменяет эту строку, транзакция А читает ту же строку и получает обновленные данные;</span></span></span></span></span></span></span>
        </p>
    </li>
    <li>
        <p align="justify"><span style="color: #333333;"><span
                style="font-family: Lato, 'Times New Roman';"><span style="font-size: small;"><span
                style="font-family: Halant, 'Times New Roman';"><span
                style="font-size: large;"><span style="font-size: medium;"><span lang="ru-RU">фантомное чтение (phantom reads) происходит, когда транзакция А считывает все строки, удовлетворяющие WHERE-условию, транзакция Б вставляет новую или удаляет одну из строк, которая удовлетворяет этому условию, транзакция А еще раз считывает все строки, удовлетворяющие WHERE-условию, уже вместе с новой строкой или недосчитавшись старой.</span></span></span></span></span></span></span>
        </p>
    </li>
</ul>